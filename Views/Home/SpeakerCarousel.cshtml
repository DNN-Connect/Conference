@inherits ConferenceWebPage<Conference>
@using Connect.DNN.Modules.Conference.Common;
@using Connect.Conference.Core.Common;
@using Connect.Conference.Core.Models.Conferences;
@using Connect.Conference.Core.Models.Speakers;
@using Connect.Conference.Core.Repositories;
@{
    ConferenceModuleContext.AddBootstrapCss();
    ConferenceModuleContext.AddCss("jquery.bxslider.min.css", "bxslider", "4.2.5");
    ConferenceModuleContext.AddScript("jquery.bxslider.min.js", "bxslider", "4.2.5");
}

<ul class="slidercontent">
 @foreach (Speaker speaker in SpeakerRepository.Instance.GetSpeakersByConference(Model.ConferenceId).Where(s => s.NrSessions > 0))
 {
 <li>
 <div>
   <div class="panel panel-info">
    <div class="panel-heading">
     <h2 class="panel-title">@speaker.DisplayName</h2>
    </div>
    <div class="panel-body">
     <div class="row">
      <div class="col-xs-4 col-sm-2">
       <div class="speaker">
        <img src="@DotNetNuke.Common.Globals.ApplicationPath/DnnImageHandler.ashx?mode=profilepic&w=64&h=64&userId=@speaker.UserId" class="img-circle img-responsive" /><br />
        @speaker.DisplayName
       </div>
      </div>
      <div class="col-xs-8 col-sm-10">
       <p>@Html.Raw(speaker.Description.SafeReplace(Environment.NewLine, "<br />"))</p>
      </div>
     </div>
    </div>
   </div>
 </div>
  <div>
      <h3>@Dnn.LocalizeString("Sessions")</h3>
   @foreach (var s in SessionRepository.Instance.GetSessionsBySpeaker(Model.ConferenceId, speaker.UserId).Where(s => s.Status >= 2).OrderBy(s => s.SessionDateAndTime))
   {
   <div class="panel panel-info speakerSession">
    <div class="panel-heading">
     <h2 class="panel-title"><a href="@Url.Action("View", "Session", new { conferenceId = Model.ConferenceId, sessionId = s.SessionId })">@s.Title</a></h2>
    </div>
    <div class="panel-body">
     <p>
     @if (s.SessionDateAndTime != null)
     {
     <strong>@(((DateTime)s.SessionDateAndTime).ToString("D")) @(((DateTime)s.SessionDateAndTime).ToString("t"))</strong>
     }
      <em>@s.TrackTitle</em>
     </p>
     <p>
      @foreach (var sp in s.Speakers)
      {
      <span class="speaker">@sp.Value</span>
      }
     </p>
     <p>@Html.Raw(s.Description.SafeReplace(Environment.NewLine, "<br />"))</p>
    </div>
   </div>
   }
  </div>
 </li>
 }
</ul>

<script type="text/javascript">
 $(document).ready(function () {
  $('.topBar').remove();
  $('.footer').remove();
  $('.sidebar').remove();
  $('.skinWidth').width('100%');
  $('.content').width('100%');
  $('.slidercontent').bxSlider({
   useCss: false,
   randomStart: true,
   pager: false,
   controls: false,
   auto: true
  });
 });
</script>