@inherits ConferenceWebPage<Conference>
@using Connect.DNN.Modules.Conference.Common;
@using Connect.Conference.Core.Models.Conferences;
@using DotNetNuke.Web.Mvc.Helpers;

<h3>@Model.Name</h3>
<p>@Model.Description</p>

<h3>@Dnn.LocalizeString("Tracks")</h3>
<table class="table">
 @foreach (var t in Connect.Conference.Core.Repositories.TrackRepository.Instance.GetTracks(Model.ConferenceId))
 {
  <tr>
   <td>@t.Title</td>
   <td>@t.Description</td>
   <td>@t.NrSessions</td>
   <td><a href="#" class="cmdEditTrack" data-id="@t.TrackId" 
          data-title="@t.Title" 
          data-description="@t.Description"
          data-sessionvoting="@t.SessionVoting">@Dnn.LocalizeString("Edit")</a></td>
  </tr>
 }
 <tr>
  <td colspan="3"></td>
  <td><a href="@Url.Action("Edit", "Track", new { conferenceId = Model.ConferenceId })">@Dnn.LocalizeString("Add")</a></td>
 </tr>
</table>

<div class="right">
 <a href="@HttpContext.Current.Request.UrlReferrer.PathAndQuery" class="btn btn-primary">@Dnn.LocalizeString("Return")</a>
</div>

<div class="modal fade" id="modalTrack" tabindex="-1" role="dialog" aria-labelledby="modalTrackLabel">
 <div class="modal-dialog" role="document">
  <div class="modal-content">
   <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
    <h4 class="modal-title" id="modalTrackLabel">Edit Track</h4>
   </div>
   <div class="modal-body">
    <form>
     <div class="form-group">
      <label for="track-title" class="control-label">Title:</label>
      <input type="text" class="form-control" id="track-title">
     </div>
     <div class="form-group">
      <label for="track-description" class="control-label">Description:</label>
      <textarea class="form-control" id="track-description"></textarea>
     </div>
     <div class="form-group">
      <label for="track-sessionvoting" class="control-label">Session Voting:</label>
      <input type="checkbox" class="form-control" id="track-sessionvoting" />
     </div>
    </form>
   </div>
   <div class="modal-footer">
    <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
    <button type="button" class="btn btn-primary">Save</button>
   </div>
  </div>
 </div>
</div>

<script type="text/javascript">
 $(function () {
  $('.cmdEditTrack').click(function () {
   $('#track-title').val($(this).data('title'));
   //$('#track-description').val($(this).data('description'));
   //$('#track-sessionvoting').val($(this).data('sessionvoting'));
   $('#modalTrack').modal('show');
   return false;
  });
 });
</script>

@{
 ConferenceModuleContext.AddBootstrapJs();
}